# Sprint 1-0: 프로젝트 기반 설정

## 구현 파일 목록

### 빌드 설정
| 파일 | 변경 내용 |
|------|-----------|
| `build.gradle.kts` | `spring-boot-starter-security`, `spring-security-test` 의존성 추가 |

### 설정 파일 (resources)
| 파일 | 역할 |
|------|------|
| `src/main/resources/application.yml` | 공통 설정 (app 이름, Exposed, Flyway, 포트) |
| `src/main/resources/application-dev.yml` | 개발 프로파일 (H2 in-memory, SQL 출력, H2 Console) |
| `src/main/resources/application-prod.yml` | 운영 프로파일 (환경변수 기반 PostgreSQL) |
| `src/test/resources/application.yml` | 테스트용 H2 in-memory 설정 |

> `application.properties` 삭제, `application.yml` 체계로 전환

### Spring 설정 (`common/config`)
| 파일 | 역할 |
|------|------|
| `SecurityConfig.kt` | Spring Security 필터 체인 및 BCryptPasswordEncoder Bean |
| `WebMvcConfig.kt` | CORS 설정 |

### Flyway 마이그레이션 (`db/migration`)
| 파일 | 생성 테이블 |
|------|------------|
| `V1__create_members.sql` | `members` |
| `V2__create_categories.sql` | `categories` |
| `V3__create_tasks.sql` | `tasks` + `idx_tasks_member_date` 인덱스 |

### 공유 VO (`common/domain`)
| 파일 | 타입 | 검증 |
|------|------|------|
| `MemberId.kt` | `@JvmInline value class` | `value > 0` |
| `CategoryId.kt` | `@JvmInline value class` | `value > 0` |
| `TaskId.kt` | `@JvmInline value class` | `value > 0` |

---

## 주요 설정 내용

### application.yml (공통)
- `spring.exposed.generate-ddl: false` — DDL 자동 생성 비활성화
- `spring.flyway.enabled: true` — Flyway 마이그레이션 활성화
- `server.port: 8080`

### SecurityConfig
- CSRF 비활성화
- H2 Console `frameOptions` 비활성화
- 허용 경로: `/actuator/health`, `/h2-console/**`, `/auth/**`
- 세션 정책: `STATELESS`
- `BCryptPasswordEncoder` Bean 등록

### WebMvcConfig
- `allowedOriginPatterns("*")` — 전체 origin 허용 (MVP)
- 허용 메서드: GET, POST, PUT, PATCH, DELETE, OPTIONS
- `allowCredentials(true)`, `maxAge(3600)`

### Flyway 마이그레이션 주의 사항
- H2 호환을 위해 `BIGSERIAL` 대신 `BIGINT GENERATED BY DEFAULT AS IDENTITY` 사용

---

## 빌드/테스트 결과

```
./gradlew build  → BUILD SUCCESSFUL
./gradlew test   → BUILD SUCCESSFUL
```
