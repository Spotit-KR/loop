# 작업 계획 프로세스 규칙

모든 코드 작업은 **계획 → 실행 → 검증** 순서로 진행합니다. 구현에 바로 들어가지 않습니다.

## 예외

다음 비코드 작업은 이 프로세스를 적용하지 않고 바로 실행합니다:

- 문서 작성·수정 (CLAUDE.md, docs/, README 등)
- 오직 설정 파일만 변경 (build.gradle.kts, application.yml 등)
- 빌드·CI/CD 설정 수정

## 프로세스 개요

1. **계획** — 작업 범위 파악, 문서 생성, Task 등록
2. **실행** — plan.md 단계별 진행, 매 단계 완료 시 체크 표시
3. **검증** — checklist.md 항목 확인, 모든 항목 통과 후 완료 처리

## 문서 생성 규칙

매 작업마다 `docs/plan/{작업명}/` 디렉토리에 3개 문서를 생성합니다.

### 1. `plan.md` — 작업 계획 목록

단계별 체크박스로 구성. 실행 중 매 단계 완료 시 실시간으로 체크 표시를 업데이트합니다.

```markdown
# {작업명} 계획

## 단계

- [ ] 1단계: {설명}
- [ ] 2단계: {설명}
- [ ] 3단계: {설명}
...
```

### 2. `context.md` — 작업 맥락

작업 계획을 세운 배경, 목표, 제약조건을 기록합니다. 컨텍스트 유실 시 이 문서를 읽고 작업을 이어갈 수 있어야 합니다.

```markdown
# {작업명} 맥락

## 배경
{왜 이 작업이 필요한지}

## 목표
{이 작업이 완료되면 어떤 상태인지}

## 제약조건
{아키텍처, 기술, 시간 등 제약}

## 관련 문서
{PRD, 이슈 링크, 참고 문서 등}
```

### 3. `checklist.md` — 완료 검증 체크리스트

작업 완료 전 반드시 확인해야 할 항목들입니다. 모든 항목이 체크되어야 작업 완료로 간주합니다.

```markdown
# {작업명} 검증 체크리스트

## 필수 항목
- [ ] 아키텍처 원칙 준수 (docs/architecture.md 기준)
- [ ] 레이어 의존성 규칙 위반 없음
- [ ] 테스트 코드 작성 완료 (Domain, Application 필수)
- [ ] 모든 테스트 통과
- [ ] 기존 테스트 깨지지 않음

## 선택 항목 (해당 시)
- [ ] BC 간 통신 규칙 준수
- [ ] Flyway 마이그레이션 작성
- [ ] API 엔드포인트 동작 확인
```

## Task 기능 활용

TaskCreate/TaskUpdate로 진행 상황을 추적합니다.

- 작업 시작 시 `TaskCreate`로 전체 작업과 하위 단계를 등록
- 각 단계 착수 시 `TaskUpdate`로 `in_progress` 설정
- 각 단계 완료 시 `TaskUpdate`로 `completed` 설정 + plan.md 체크 표시 업데이트
- 작업 완료 후 checklist.md 항목 최종 확인

## plan.md 실시간 업데이트

매 단계 완료 시 plan.md의 해당 체크박스를 `[x]`로 업데이트합니다. 이를 통해 작업 진행 상황을 문서에서도 확인할 수 있습니다.

```markdown
- [x] 1단계: 도메인 모델 설계 ← 완료
- [x] 2단계: 테스트 작성 ← 완료
- [ ] 3단계: 구현 ← 진행 중
- [ ] 4단계: 검증
```
