FROM node:20-alpine AS builder
WORKDIR /build
COPY spectaql/ spectaql/
COPY src/main/resources/schema/ src/main/resources/schema/
RUN npx spectaql spectaql/config.yml

FROM nginx:alpine
COPY --from=builder /build/build/spectaql/ /usr/share/nginx/html/
EXPOSE 80
